{
    "contents" : "---\ntitle: \"step_analysis\"\nauthor: \"Leo Godin\"\ndate: \"Saturday, July 19, 2014\"\noutput: html_document\n---\n\nStep Analysis For One Anonymous User\n====================================\n##Summary\nUsing fitness trackers, we can measure the number of steps we take over time. This analysis looks at steps taken in five-minute increments. \n\n```{r}\nlibrary(plyr)\nlibrary(ggplot2)\n```\n\nThe first order of business is to load the data. The data\n```{r}\nzipfile = \"activity.zip\"\nunzip(zipfile)\ndatafile = \"activity.csv\"\ndata = read.csv(datafile, na.strings=\"NA\")\n```\n\nSince we know that the dates are important for calculating daily activity, we will convert the date factor to the date type\n```{r}\ndata$date = strptime(data$date, format=\"%Y-%m-%d\")\n```\n\n**What is mean total number of steps taken per day?**\n\nWe're not concerned with missing data here, so we'll simply remove missing values.  We don't want to do this on the \"data\" data.frame because later on we will try to estimate values for NAs\n\nPlot the frequency of daily steps using 30 breaks\n\n```{r}\nsteps = data[!is.na(data$steps),]\ndaily_steps = ddply(steps, \"date\", function(x) sum(x$steps))\nnames(daily_steps) = c(\"date\", \"steps\")\nhist(daily_steps$steps, breaks=30, ylab=\"Frequency\", xlab=\"Number of steps\", main=\"Daily Steps With Missing Values As 0\")\n```\n\nWhat is the mean?\n```{r}\nmean(daily_steps$steps)\n```\nWhat is the daily median?\n```{r}\nmedian(daily_steps$steps)\n```\n\n**What is the average daily activity pattern?***\n\nWe want to calculate the mean number of steps per five-minute period across all days. Again, we're not concerned with missing values, so we will remove them. We also want to convert the intervals to a factor. \n\n```{r}\n  interval_data = data[!is.na(data$steps),]\n  interval_data$interval = as.factor(interval_data$interval)\n  interval_steps = ddply(interval_data, \"interval\", function(x) mean(x$steps))\n  names(interval_steps) = c(\"interval\", \"steps\")\n  plot(interval_steps$interval, interval_steps$steps, \n       type=\"l\", \n       xlab=\"Five-minute interval\",\n       ylab=\"Number of steps\",\n       main=\"Average Steps By Five-minute Interval\")\n```\n\nWhat five-minute interval has the most average steps per day? For this we will sort the data.frame and take the first interval\n\n```{r}\nas.character(interval_steps[order(-interval_steps$steps),][1,1])\n```\n\n**Imputing missing values**\n\nCalculate and report the total number of missing values in the dataset (i.e. the total number of rows with NAs)\n\n```{r}\ndim(data[is.na(data$steps),])[1]\n```\n\nTo fill in missing data, we will take the mean of that interval. We calculated this earlier, but for clarity, we will do it again here. The process takes three steps\n1. Separate missing and non-missing data\n2. Calculate the mean for non-missing data by interval\n3. merge the missing data with the mean data\n4. Combine the merged missing data and non-missing data\n\n```{r}\n  interval_data = data[!is.na(data$steps),]\n  missing_data = data[is.na(data$steps),]\n  interval_means = ddply(interval_data, \"interval\", function(x) mean(x$steps))\n  estimated_data = merge(missing_data, interval_means, by=\"interval\")\n  # Remove the old steps column\n  estimated_data = estimated_data[,c(1, 3, 4)]\n  names(estimated_data) = c(\"interval\", \"date\", \"steps\")\n  estimated_steps = rbind(interval_data, estimated_data)\n  \n```\n\n\n\n\nMake a histogram of the total number of steps taken each day and Calculate and report the mean and median total number of steps taken per day. Do these values differ from the estimates from the first part of the assignment? What is the impact of imputing missing data on the estimates of the total daily number of steps?\n\n```{r}\ndaily_steps = ddply(estimated_steps, \"date\", function(x) sum(x$steps))\nnames(daily_steps) = c(\"date\", \"steps\")\nhist(daily_steps$steps, xlab=\"Daily steps\", ylab=\"Frequency\", main=\"Daily Steps With Estimated Missing Values\", breaks=30)\n```\nMean daily steps with estimation\n```{r}\nmean(daily_steps$steps)\n```\nMedian daily steps with estimation\n```{r}\nmedian(daily_steps$steps)\n```\n\nComparing this to the data where we did not estimate missing values, we see that the mean is unchanged and the medien is higher by 1.\n\n**Are there differences in activity patterns between weekdays and weekends?**\n\nFor this part, we will use the data that includes estimation. \n Create a new factor variable in the dataset with two levels – “weekday” and “weekend” indicating whether a given date is a weekday or weekend day. \n\n```{r}\n# We use %u as it returns an integer from 1-7 with Monday being 1. This allows us to subset on >=6 to determine \n# the weekend.\nweekdays = strftime(estimated_steps$date, format=\"%u\")\nweekend_designation = rep(0, length(weekdays))\nweekend_designation[weekdays >= 6] = 1\n# Convert to factor and set levels\nweek_part = as.factor(weekend_designation)\nlevels(week_part) = c(\"weekday\", \"weekend\")\nestimated_steps$week_part = week_part\n```\nMake a panel plot containing a time series plot (i.e. type = \"l\") of the 5-minute interval (x-axis) and the average number of steps taken, averaged across all weekday days or weekend days (y-axis). The plot should look something like the following, which was creating using simulated data:\n\n```{r}\naverage_steps = ddply(estimated_steps, c(\"week_part\", \"interval\"), function(x) mean(x$steps))\nnames(average_steps) = c(\"week_part\", \"interval\", \"steps\")\n\nggplot(average_steps, aes(x=interval, y=steps)) +\n  geom_line() + \n  facet_grid(week_part ~ .)\n```\n\n",
    "created" : 1405785863858.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3330026077",
    "id" : "81DF2110",
    "lastKnownWriteTime" : 1405795146,
    "path" : "C:/Users/lggodin/Google Drive/Learning/Coursera/datascience/reproducible_research/RepData_PeerAssessment1/step_data.rmd",
    "project_path" : "step_data.rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}